<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="SWP" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="8.0.1">
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="10000">
        </property>
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="timeResolution" class="ptolemy.actor.parameters.SharedParameter" value="1E-10">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{50.0, 20.0}">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={4, 24, 1424, 865}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1211, 755]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.5186690622596">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{430.7993286941216, 172.1923828124997}">
    </property>
    <property name="kWindowSize" class="ptolemy.data.expr.Parameter" value="127.0">
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
    </property>
    <property name="kForwardLossProb" class="ptolemy.data.expr.Parameter" value="0.5">
    </property>
    <property name="kChannelSize" class="ptolemy.data.expr.Parameter" value="2000.0">
    </property>
    <property name="packetSize" class="ptolemy.data.expr.Parameter" value="200.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -100.0]">
        </property>
    </property>
    <property name="speed" class="ptolemy.data.expr.Parameter" value="19.2">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -60.0]">
        </property>
    </property>
    <property name="ackPacketSize" class="ptolemy.data.expr.Parameter" value="16.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -80.0]">
        </property>
    </property>
    <property name="second" class="ptolemy.data.expr.Parameter" value="1.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -40.0]">
        </property>
    </property>
    <property name="packetDelay" class="ptolemy.data.expr.Parameter" value="packetSize/speed">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -120.0]">
        </property>
    </property>
    <property name="ackPacketDelay" class="ptolemy.data.expr.Parameter" value="ackPacketSize/speed">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -140.0]">
        </property>
    </property>
    <property name="channelSize" class="ptolemy.data.expr.Parameter" value="kChannelSize">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -160.0]">
        </property>
    </property>
    <property name="varA" class="ptolemy.data.expr.Parameter" value="channelSize/packetSize">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -180.0]">
        </property>
    </property>
    <property name="timeout" class="ptolemy.data.expr.Parameter" value="2*(kChannelDelay+packetDelay)">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, -200.0]">
        </property>
    </property>
    <property name="kCanSendNext" class="ptolemy.data.expr.Parameter" value="packetSize/speed">
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
    </property>
    <property name="kChannelDelay" class="ptolemy.data.expr.Parameter" value="channelSize/speed">
    </property>
    <property name="kBackwardChannelDelay" class="ptolemy.data.expr.Parameter" value="0.0">
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
    </property>
    <class name="Channel" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-225.0, -80.0]">
        </property>
        <property name="lossProbability" class="ptolemy.data.expr.Parameter" value="0.01">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[55.0, 85.0]">
            </property>
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Lose packets with lossProbability and delay them a&#10;delay between minimumDelay and maximumDelay.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[210.0, 25.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={476, 265, 813, 510}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
        </property>
        <property name="channelSize" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="channelDelay" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <port name="input" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 135.0]">
            </property>
        </port>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[490.0, 135.0]">
            </property>
        </port>
        <entity name="loser" class="ptolemy.actor.lib.Switch">
            <property name="SwitchIcon" class="ptolemy.vergil.icon.EditorIcon">
                <property name="rectangle" class="ptolemy.vergil.kernel.attributes.RectangleAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 0.0]">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="none">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="33.0">
                    </property>
                    <property name="height" class="ptolemy.data.expr.Parameter" value="40.0">
                    </property>
                    <property name="centered" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </property>
                <property name="line3" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-30.0, 0.0">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="10.0">
                    </property>
                </property>
                <property name="line4" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-10.0, -10.0">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="10.0">
                    </property>
                </property>
                <property name="line5" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-30.0, 0.0">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="10.0">
                    </property>
                </property>
                <property name="line6" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-10.0, 10.0">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="10.0">
                    </property>
                </property>
                <property name="line" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-20.0, 0.0">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.6,0.6,0.6,1.0}">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="10.0">
                    </property>
                    <property name="y" class="ptolemy.data.expr.Parameter" value="-10.0">
                    </property>
                </property>
                <property name="line7" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-20.0, 0.0">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.6,0.6,0.6,1.0}">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="14.14">
                    </property>
                </property>
                <property name="line8" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-20.0, 0.0">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.6,0.6,0.6,1.0}">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="10.0">
                    </property>
                    <property name="y" class="ptolemy.data.expr.Parameter" value="10.0">
                    </property>
                </property>
                <property name="line9" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-19.0, 0.0]">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.6,0.6,0.6,1.0}">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="13.0">
                    </property>
                    <property name="y" class="ptolemy.data.expr.Parameter" value="6.0">
                    </property>
                </property>
                <property name="line10" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-19.0, 0.0}">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.6,0.6,0.6,1.0}">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="13.0">
                    </property>
                    <property name="y" class="ptolemy.data.expr.Parameter" value="-6.0">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds = {-255, 184, 815, 509}, maximized = false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="4.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{0.0, 0.0}">
                </property>
                <property name="annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="textSize" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="n">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-10.0, 10.0">
                    </property>
                </property>
                <property name="line2" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-15.0, 20.0">
                    </property>
                    <property name="lineColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,1.0,1.0}">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="0.0">
                    </property>
                    <property name="y" class="ptolemy.data.expr.Parameter" value="-30.0">
                    </property>
                </property>
                <property name="annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="textSize" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="1">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="-10.0, -25.0">
                    </property>
                </property>
                <property name="line11" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-6.0, -6.0]">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="6.0">
                    </property>
                </property>
                <property name="line12" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-6.0, 6.0]">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="6.0">
                    </property>
                </property>
                <property name="line13" class="ptolemy.vergil.kernel.attributes.LineAttribute">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 0.0]">
                    </property>
                    <property name="x" class="ptolemy.data.expr.Parameter" value="5.0">
                    </property>
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[415.0, 135.0]">
            </property>
        </entity>
        <entity name="loss" class="ptolemy.actor.lib.DiscreteRandomSource">
            <property name="seed" class="ptolemy.actor.parameters.SharedParameter" value="0">
            </property>
            <property name="pmf" class="ptolemy.data.expr.Parameter" value="{(1.0 - lossProbability) , lossProbability}">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[310.0, 190.0]">
            </property>
        </entity>
        <entity name="TimeDelay" class="ptolemy.actor.lib.TimeDelay">
            <property name="delay" class="ptolemy.data.expr.Parameter" value="channelDelay">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 135.0]">
            </property>
        </entity>
        <relation name="_R" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex" value="[240.0, 135.0]">
            </vertex>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="{380.0, 190.0}">
            </vertex>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="input" relation="relation2"/>
        <link port="output" relation="_R"/>
        <link port="loser.input" relation="relation"/>
        <link port="loser.output" relation="_R"/>
        <link port="loser.control" relation="relation4"/>
        <link port="loss.output" relation="relation4"/>
        <link port="loss.trigger" relation="relation"/>
        <link port="TimeDelay.input" relation="relation2"/>
        <link port="TimeDelay.output" relation="relation"/>
    </class>
    <class name="PacketManager" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-225.0, -155.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={395, 326, 813, 510}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0238907849829">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0000000000002, 279.6263020833334}">
        </property>
        <port name="packet" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="iterateNumber" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 240.0}">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="outPacket" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{580.0, 195.0}">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="PacketManagerModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 215.0]">
            </property>
            <port name="packet" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="iterateNumber" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="outPacket" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={313, 194, 813, 511}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.6798866855524">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{240.0000000000001, 215.7669270833333}">
                </property>
                <port name="packet" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-145.0, 95.0]">
                    </property>
                </port>
                <port name="iterateNumber" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-135.0, 145.0]">
                    </property>
                </port>
                <port name="outPacket" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{580.0, 215.0}">
                    </property>
                </port>
                <entity name="process" class="ptolemy.domains.modal.kernel.State">
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 5.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; iterateNumber_isPresent">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=packet.t,n=packet.n+1}">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.7544859817254292">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.47378062514121977">
                    </property>
                </relation>
                <link port="process.incomingPort" relation="relation"/>
                <link port="process.outgoingPort" relation="relation"/>
            </entity>
            <relation name="packetRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="iterateNumberRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="outPacketRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <link port="packet" relation="packetRelation"/>
            <link port="iterateNumber" relation="iterateNumberRelation"/>
            <link port="outPacket" relation="outPacketRelation"/>
            <link port="_Controller.packet" relation="packetRelation"/>
            <link port="_Controller.iterateNumber" relation="iterateNumberRelation"/>
            <link port="_Controller.outPacket" relation="outPacketRelation"/>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="packet" relation="relation"/>
        <link port="iterateNumber" relation="relation2"/>
        <link port="outPacket" relation="relation3"/>
        <link port="PacketManagerModel.packet" relation="relation"/>
        <link port="PacketManagerModel.iterateNumber" relation="relation2"/>
        <link port="PacketManagerModel.outPacket" relation="relation3"/>
    </class>
    <class name="PacketNumber" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-225.0, 5.0]">
        </property>
        <port name="packet" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
            </property>
        </port>
        <port name="packetNumber" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{580.0, 200.0}">
            </property>
        </port>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="packet.n">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 205.0]">
            </property>
            <port name="packet" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="{t=int,n=int}">
                </property>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="packet" relation="relation"/>
        <link port="packetNumber" relation="relation2"/>
        <link port="Expression.output" relation="relation2"/>
        <link port="Expression.packet" relation="relation"/>
    </class>
    <class name="ValueWithTimestemp" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-220.0, 90.0]">
        </property>
        <property name="valueParam" class="ptolemy.data.expr.Parameter">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 45.0]">
            </property>
        </property>
        <property name="timeParam" class="ptolemy.data.expr.Parameter">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 65.0]">
            </property>
        </property>
        <port name="value" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="valueWithTimestemp" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 185.0]">
            </property>
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="valueParam">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 145.0]">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="timeParam+&quot; -- n:&quot;+valueParam.n+&quot; t:&quot;+valueParam.t">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, 100.0]">
            </property>
            <port name="timeParam" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="CurrentTime" class="ptolemy.actor.lib.CurrentTime">
            <doc>Output the current time.</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[205.0, 205.0]">
            </property>
        </entity>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="value" relation="relation4"/>
        <link port="valueWithTimestemp" relation="relation3"/>
        <link port="SetVariable.input" relation="relation4"/>
        <link port="SetVariable.output" relation="relation"/>
        <link port="Expression.output" relation="relation3"/>
        <link port="Expression.timeParam" relation="relation2"/>
        <link port="CurrentTime.output" relation="relation2"/>
        <link port="CurrentTime.trigger" relation="relation"/>
    </class>
    <entity name="MessageSource" class="ptolemy.domains.fsm.demo.ABP.DEMessageSource">
        <property name="maxDelay" class="ptolemy.data.expr.Parameter" value="0.5">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[15.0, 110.0]">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="request" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="next" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="Timer" class="ptolemy.domains.fsm.demo.ABP.DETimer">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-95.0, 185.0]">
        </property>
        <port name="expired" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="set" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="Sender" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[290.0, 155.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={4, 22, 1436, 878}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1223, 768]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.1782924923169">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{320.2190387764364, 213.9672604955811}">
        </property>
        <port name="outPacket" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 140.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="giveMeAPacket" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="multiport"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 225.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="packet" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-15.0, 300.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="setTimer" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[465.0, 335.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="expired" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 365.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="SenderModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 275.0]">
            </property>
            <port name="giveMeAPacket" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="multiport"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="outPacket" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="packet" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="setTimer" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="expired" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="canSendNext" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="setCanSendNextTimer" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={4, 22, 1436, 878}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1223, 767]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.64">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{691.5000000000002, 339.5000000000007}">
                </property>
                <property name="nextSendPacketNumber" class="ptolemy.data.expr.Parameter" value="140">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                        <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-275.0, 45.0]">
                    </property>
                </property>
                <property name="windowSize" class="ptolemy.data.expr.Parameter" value="kWindowSize">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                        <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-275.0, 20.0]">
                    </property>
                </property>
                <property name="remainWindow" class="ptolemy.data.expr.Parameter" value="126.0">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                        <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-275.0, -5.0]">
                    </property>
                </property>
                <property name="isTimeoutTimerSet" class="ptolemy.data.expr.Parameter" value="0">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                        <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-280.0, 75.0]">
                    </property>
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="RTO timeout">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, 110.0]">
                    </property>
                </property>
                <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
                    </property>
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="RR received">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[60.0, 375.0]">
                    </property>
                </property>
                <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="NACK received">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-150.0, 635.0]">
                    </property>
                </property>
                <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="ACK received">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1200.0, 660.0]">
                    </property>
                </property>
                <property name="Annotation5" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Set RTO for last package">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[655.0, 360.0]">
                    </property>
                </property>
                <property name="Annotation6" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Main send loop">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-10.0, 535.0]">
                    </property>
                </property>
                <property name="Annotation7" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="RR waiting timeout">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-430.0, 200.0]">
                    </property>
                </property>
                <property name="isWaitingForLastPackageAck" class="ptolemy.data.expr.Parameter" value="0">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                        <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-225.0, 105.0]">
                    </property>
                </property>
                <port name="giveMeAPacket" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="multiport"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, -110.0]">
                    </property>
                </port>
                <port name="outPacket" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1175.0, 35.0]">
                    </property>
                </port>
                <port name="packet" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, -70.0]">
                    </property>
                </port>
                <port name="setTimer" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1175.0, 75.0]">
                    </property>
                </port>
                <port name="expired" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, -25.0]">
                    </property>
                </port>
                <port name="canSendNext" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, -165.0]">
                    </property>
                </port>
                <port name="setCanSendNextTimer" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[1170.0, -35.0]">
                    </property>
                </port>
                <entity name="init" class="ptolemy.domains.modal.kernel.State">
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[305.0, 80.0]">
                    </property>
                </entity>
                <entity name="sending" class="ptolemy.domains.modal.kernel.State">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[565.0, 335.0]">
                    </property>
                </entity>
                <entity name="waitingForReport" class="ptolemy.domains.modal.kernel.State">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-350.0, 320.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="giveMeAPacket_isPresent">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="setCanSendNextTimer=1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="nextSendPacketNumber = 1;&#10;remainWindow=windowSize-1;&#10;isTimeoutTimerSet=0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.5579106769176894">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.758494067328859">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == 1 ">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="setCanSendNextTimer=1;&#10;setTimer=-1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="remainWindow=remainWindow+1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="3.08872441511756">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.0458784135786359">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == 2">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="setTimer=-1;&#10;setCanSendNextTimer=1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="nextSendPacketNumber=packet.n;&#10;remainWindow=windowSize-1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.3041160102393861">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.6236412606564374">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="canSendNext_isPresent &amp;&amp; remainWindow &gt;= 0 &amp;&amp; !packet_isPresent &amp;&amp; !expired_isPresent">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=0,n=nextSendPacketNumber};&#10;setCanSendNextTimer=1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="nextSendPacketNumber=nextSendPacketNumber+1;&#10;remainWindow=remainWindow-1;&#10;isWaitingForLastPackageAck=0">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.881273930780489">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.3763254347625076">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == -1">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="setCanSendNextTimer=1;&#10;setTimer=-1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="nextSendPacketNumber = packet.n;&#10;remainWindow = windowSize - 1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="3.08796629374349">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.06433519857247">
                    </property>
                </relation>
                <relation name="relation10" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="remainWindow == -1 &amp;&amp; isWaitingForLastPackageAck == 0 &amp;&amp; !packet_isPresent">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="setTimer=timeout">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="isWaitingForLastPackageAck=1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.6703426899608367">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.080880286746771">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="expired_isPresent">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=2,n=-1};&#10;setTimer=timeout">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.5149327448808685">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="expired_isPresent">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=2,n=-1};&#10;setTimer=timeout">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.356194490192345">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.850570048970966">
                    </property>
                </relation>
                <link port="init.outgoingPort" relation="relation"/>
                <link port="sending.incomingPort" relation="relation"/>
                <link port="sending.incomingPort" relation="relation5"/>
                <link port="sending.incomingPort" relation="relation8"/>
                <link port="sending.incomingPort" relation="relation10"/>
                <link port="sending.incomingPort" relation="relation6"/>
                <link port="sending.incomingPort" relation="relation3"/>
                <link port="sending.outgoingPort" relation="relation5"/>
                <link port="sending.outgoingPort" relation="relation8"/>
                <link port="sending.outgoingPort" relation="relation3"/>
                <link port="sending.outgoingPort" relation="relation10"/>
                <link port="sending.outgoingPort" relation="relation4"/>
                <link port="waitingForReport.incomingPort" relation="relation4"/>
                <link port="waitingForReport.incomingPort" relation="relation2"/>
                <link port="waitingForReport.outgoingPort" relation="relation6"/>
                <link port="waitingForReport.outgoingPort" relation="relation2"/>
            </entity>
            <relation name="giveMeAPacketRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="outPacketRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="packetRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="setTimerRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="expiredRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="canSendNextRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="setCanSendNextTimerRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <link port="giveMeAPacket" relation="giveMeAPacketRelation"/>
            <link port="outPacket" relation="outPacketRelation"/>
            <link port="packet" relation="packetRelation"/>
            <link port="setTimer" relation="setTimerRelation"/>
            <link port="expired" relation="expiredRelation"/>
            <link port="canSendNext" relation="canSendNextRelation"/>
            <link port="setCanSendNextTimer" relation="setCanSendNextTimerRelation"/>
            <link port="_Controller.giveMeAPacket" relation="giveMeAPacketRelation"/>
            <link port="_Controller.outPacket" relation="outPacketRelation"/>
            <link port="_Controller.packet" relation="packetRelation"/>
            <link port="_Controller.setTimer" relation="setTimerRelation"/>
            <link port="_Controller.expired" relation="expiredRelation"/>
            <link port="_Controller.canSendNext" relation="canSendNextRelation"/>
            <link port="_Controller.setCanSendNextTimer" relation="setCanSendNextTimerRelation"/>
        </entity>
        <entity name="Server" class="ptolemy.domains.de.lib.Server">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, 140.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="packetDelay">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[430.95899963378906, 262.2874069213867]">
            </property>
            <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </entity>
        <entity name="Const2" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="kCanSendNext">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[290.0, 450.0]">
            </property>
            <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
            </property>
        </entity>
        <entity name="Timer" class="ptolemy.domains.fsm.demo.ABP.DETimer">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[200.0, 450.0]">
            </property>
            <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <port name="expired" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="set" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
            </property>
            <vertex name="vertex1" value="[280.0, 170.0]">
            </vertex>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="outPacket" relation="relation6"/>
        <link port="giveMeAPacket" relation="relation"/>
        <link port="packet" relation="relation3"/>
        <link port="setTimer" relation="relation4"/>
        <link port="expired" relation="relation5"/>
        <link port="SenderModel.giveMeAPacket" relation="relation"/>
        <link port="SenderModel.outPacket" relation="relation8"/>
        <link port="SenderModel.packet" relation="relation3"/>
        <link port="SenderModel.setTimer" relation="relation4"/>
        <link port="SenderModel.expired" relation="relation5"/>
        <link port="SenderModel.canSendNext" relation="relation10"/>
        <link port="SenderModel.setCanSendNextTimer" relation="relation2"/>
        <link port="Server.input" relation="relation8"/>
        <link port="Server.output" relation="relation6"/>
        <link port="Server.serviceTime" relation="relation7"/>
        <link port="Const.output" relation="relation7"/>
        <link port="Const.trigger" relation="relation8"/>
        <link port="Const2.output" relation="relation9"/>
        <link port="Const2.trigger" relation="relation2"/>
        <link port="Timer.expired" relation="relation10"/>
        <link port="Timer.set" relation="relation9"/>
    </entity>
    <entity name="Display" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={11, 691, 484, 208}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[484, 164]">
        </property>
        <property name="title" class="ptolemy.data.expr.StringParameter" value="Sender Out">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, -155.0]">
        </property>
    </entity>
    <entity name="ForwardChannel" class="Channel">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 170.0]">
        </property>
        <property name="lossProbability" class="ptolemy.data.expr.Parameter" value="kForwardLossProb">
        </property>
        <property name="channelSize" class="ptolemy.data.expr.Parameter" value="kChannelSize">
        </property>
        <property name="channelDelay" class="ptolemy.data.expr.Parameter" value="kChannelDelay">
        </property>
    </entity>
    <entity name="Reciever" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[655.0, 175.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={286, 312, 813, 510}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[600, 400]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{300.0, 200.0}">
        </property>
        <property name="packetDelay" class="ptolemy.data.expr.Parameter" value="packetSize/speed*second">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{-70.0, -110.0}">
            </property>
        </property>
        <port name="packet" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
            </property>
        </port>
        <port name="outPacket" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[565.0, 145.0]">
            </property>
        </port>
        <entity name="ReceiverModel" class="ptolemy.domains.modal.modal.ModalModel">
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 170.0]">
            </property>
            <port name="packet" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="outPacket" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
                </property>
                <property name="lastReceivedPacketNumber" class="ptolemy.data.expr.Parameter" value="139">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                        <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-50.0, -35.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={4, 22, 1436, 878}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1227, 767]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.4419213522144">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{369.4739685058594, 224.7126221349789}">
                </property>
                <property name="nextAwaitingPacketNumber" class="ptolemy.data.expr.Parameter" value="140">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                        <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                        </property>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-50.0, -5.0]">
                    </property>
                </property>
                <port name="packet" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
                    </property>
                </port>
                <port name="outPacket" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[730.0226440429688, 25.282394164022094]">
                    </property>
                </port>
                <entity name="init" class="ptolemy.domains.modal.kernel.State">
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[855.0, 310.0]">
                    </property>
                </entity>
                <entity name="receiving" class="ptolemy.domains.modal.kernel.State">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 165.0]">
                    </property>
                </entity>
                <entity name="reportSend" class="ptolemy.domains.modal.kernel.State">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[695.0, 440.0]">
                    </property>
                </entity>
                <entity name="invalidPacket" class="ptolemy.domains.modal.kernel.State">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[-55.0, 395.0]">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.n==nextAwaitingPacketNumber">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=1,n=packet.n+1}">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="lastReceivedPacketNumber=packet.n;&#10;nextAwaitingPacketNumber = packet.n + 1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="2.3164601458283975">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-3.8996796896374195">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == 0 &amp;&amp; packet.n == 1">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=1, n=packet.n+1}">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="lastReceivedPacketNumber = packet.n;&#10;nextAwaitingPacketNumber = packet.n + 1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.4408551252539008">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == 2">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.7333974537823231">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="0.9440572696695684">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=2, n=nextAwaitingPacketNumber}">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.31733720308287305">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.7397083171623209">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == 2">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="nextAwaitingPacketNumber=1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.9251882589202844">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.9077401154051554">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == 0 &amp;&amp; packet.n != nextAwaitingPacketNumber">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.315692109550061">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="annotation" class="ptolemy.data.expr.StringParameter" value="If first received packet is not the first packet">
                    </property>
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="packet_isPresent &amp;&amp; packet.t == 0 &amp;&amp; packet.n != 1">
                    </property>
                    <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="nextAwaitingPacketNumber=1">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.3438955807241317">
                        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                        </property>
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.9220116395941376">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="outPacket={t=-1,n=nextAwaitingPacketNumber}">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.18324893007666898">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.6512304945541268">
                    </property>
                </relation>
                <link port="init.outgoingPort" relation="relation2"/>
                <link port="init.outgoingPort" relation="relation5"/>
                <link port="init.outgoingPort" relation="relation7"/>
                <link port="receiving.incomingPort" relation="relation"/>
                <link port="receiving.incomingPort" relation="relation2"/>
                <link port="receiving.incomingPort" relation="relation4"/>
                <link port="receiving.incomingPort" relation="relation8"/>
                <link port="receiving.outgoingPort" relation="relation3"/>
                <link port="receiving.outgoingPort" relation="relation"/>
                <link port="receiving.outgoingPort" relation="relation6"/>
                <link port="reportSend.incomingPort" relation="relation3"/>
                <link port="reportSend.incomingPort" relation="relation5"/>
                <link port="reportSend.outgoingPort" relation="relation4"/>
                <link port="invalidPacket.incomingPort" relation="relation6"/>
                <link port="invalidPacket.incomingPort" relation="relation7"/>
                <link port="invalidPacket.outgoingPort" relation="relation8"/>
            </entity>
            <relation name="packetRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="outPacketRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <link port="packet" relation="packetRelation"/>
            <link port="outPacket" relation="outPacketRelation"/>
            <link port="_Controller.packet" relation="packetRelation"/>
            <link port="_Controller.outPacket" relation="outPacketRelation"/>
        </entity>
        <entity name="Server" class="ptolemy.domains.de.lib.Server">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, 145.0]">
            </property>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="ackPacketDelay">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[410.669921875, 262.904296875]">
            </property>
            <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="false">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
            </property>
            <vertex name="vertex1" value="[331.25, 168.75]">
            </vertex>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="{250.0, 80.0}">
            </vertex>
        </relation>
        <link port="packet" relation="relation"/>
        <link port="outPacket" relation="relation2"/>
        <link port="ReceiverModel.packet" relation="relation"/>
        <link port="ReceiverModel.outPacket" relation="relation5"/>
        <link port="Server.input" relation="relation5"/>
        <link port="Server.output" relation="relation2"/>
        <link port="Server.serviceTime" relation="relation4"/>
        <link port="Const.output" relation="relation4"/>
        <link port="Const.trigger" relation="relation5"/>
    </entity>
    <entity name="BackwardChannel" class="Channel">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, 300.0]">
        </property>
        <property name="lossProbability" class="ptolemy.data.expr.Parameter" value="0.0">
        </property>
        <property name="channelDelay" class="ptolemy.data.expr.Parameter" value="kBackwardChannelDelay">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
        </property>
    </entity>
    <entity name="Display2" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={88, 205, 484, 208}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[484, 164]">
        </property>
        <property name="title" class="ptolemy.data.expr.StringParameter" value="Reciver In">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[815.0, 90.0]">
        </property>
    </entity>
    <entity name="Display3" class="ptolemy.actor.lib.gui.Display">
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={185, 432, 484, 208}, maximized=false}">
        </property>
        <property name="_paneSize" class="ptolemy.actor.gui.SizeAttribute" value="[484, 164]">
        </property>
        <property name="title" class="ptolemy.data.expr.StringParameter" value="Sender In">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[775.0, 360.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="false">
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
        </property>
    </entity>
    <entity name="TimedPlotter" class="ptolemy.actor.lib.gui.TimedPlotter">
        <property name="fillOnWrapup" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="automaticRescale" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="legend" class="ptolemy.kernel.util.StringAttribute" value="sender_out, receiver_in, receiver_out">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={4, 22, 1436, 878}, maximized=false}">
        </property>
        <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[502, 283]">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[985.0, -250.0]">
        </property>
        <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>TimedPlotter</title>
<xLabel></xLabel>
<yLabel></yLabel>
<xRange min="20.987710732100002" max="9999.3210440725"/>
<yRange min="1.0" max="144.0"/>
<default connected="no" marks="various" stems="yes"/>
</plot>?>
        </configure>
    </entity>
    <entity name="InstanceOfPacketNumber" class="PacketNumber">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[460.0, -260.0]">
        </property>
    </entity>
    <entity name="InstanceOfPacketNumber2" class="PacketNumber">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[600.0, -45.0]">
        </property>
    </entity>
    <entity name="InstanceOfPacketNumber4" class="PacketNumber">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 485.0]">
        </property>
    </entity>
    <entity name="InstanceOfValueWithTimestemp" class="ValueWithTimestemp">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, -155.0]">
        </property>
    </entity>
    <entity name="InstanceOfValueWithTimestemp2" class="ValueWithTimestemp">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[660.0, 90.0]">
        </property>
    </entity>
    <entity name="InstanceOfValueWithTimestemp3" class="ValueWithTimestemp">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[545.0, 360.0]">
        </property>
        <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="false">
        </property>
    </entity>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[755.0, 300.0]">
        </vertex>
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[390.0, 175.0]">
        </vertex>
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[135.0, 225.0]">
        </vertex>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[570.0, 175.0]">
        </vertex>
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[235.0, 360.0]">
        </vertex>
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[895.0, 55.0]">
        </vertex>
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation12" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation13" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="MessageSource.request" relation="relation2"/>
    <link port="Timer.expired" relation="relation"/>
    <link port="Timer.set" relation="relation8"/>
    <link port="Sender.outPacket" relation="relation5"/>
    <link port="Sender.giveMeAPacket" relation="relation2"/>
    <link port="Sender.packet" relation="relation9"/>
    <link port="Sender.setTimer" relation="relation8"/>
    <link port="Sender.expired" relation="relation"/>
    <link port="Display.input" relation="relation11"/>
    <link port="ForwardChannel.input" relation="relation5"/>
    <link port="ForwardChannel.output" relation="relation7"/>
    <link port="Reciever.packet" relation="relation7"/>
    <link port="Reciever.outPacket" relation="relation10"/>
    <link port="BackwardChannel.input" relation="relation10"/>
    <link port="BackwardChannel.output" relation="relation9"/>
    <link port="Display2.input" relation="relation12"/>
    <link port="Display3.input" relation="relation13"/>
    <link port="TimedPlotter.input" relation="relation3"/>
    <link port="TimedPlotter.input" relation="relation6"/>
    <link port="TimedPlotter.input" relation="relation4"/>
    <link port="InstanceOfPacketNumber.packet" relation="relation5"/>
    <link port="InstanceOfPacketNumber.packetNumber" relation="relation3"/>
    <link port="InstanceOfPacketNumber2.packet" relation="relation7"/>
    <link port="InstanceOfPacketNumber2.packetNumber" relation="relation6"/>
    <link port="InstanceOfPacketNumber4.packet" relation="relation9"/>
    <link port="InstanceOfPacketNumber4.packetNumber" relation="relation4"/>
    <link port="InstanceOfValueWithTimestemp.value" relation="relation5"/>
    <link port="InstanceOfValueWithTimestemp.valueWithTimestemp" relation="relation11"/>
    <link port="InstanceOfValueWithTimestemp2.value" relation="relation7"/>
    <link port="InstanceOfValueWithTimestemp2.valueWithTimestemp" relation="relation12"/>
    <link port="InstanceOfValueWithTimestemp3.value" relation="relation9"/>
    <link port="InstanceOfValueWithTimestemp3.valueWithTimestemp" relation="relation13"/>
</entity>
